
//清除备份文件
task cleanBackup{
    group = 'turquoise-tools'
    doLast {
        File backupDir = new File(rootDir.getAbsolutePath() + '/' + backup_dir)
        backupDir.deleteDir()
    }
}

//备份程序(目前还有问题，无法打包.gitignore)
task startBackup(type: Zip, dependsOn: cleanBackup){
    group = 'turquoise-tools'
    //archive name
    baseName = backup_name
    //archive path
    destinationDir = file(backup_dir)
    //resource path
    from ('.') {
        //we must exclude itself !!!
        exclude backup_dir
        exclude '/.git'
        exclude '/.gradle'
        exclude '/build'
        exclude '/captures'
        exclude '/release'
        exclude '*/build'
    }
    //.git maybe hidden, we must configure it by absolute path
    from (rootDir.getAbsolutePath() + '/.git') {
        into '.git/'
    }
}